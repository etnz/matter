// Code generated by data_gen.go. DO NOT EDIT.

package modb

import (
	"fmt"

	"github.com/etnz/matter/tlv"
	"github.com/etnz/matter/dm"
	
)

var _ = dm.SubjectID(0)
var _ = tlv.Struct{}
var _ = fmt.Sprint()







type ModeOption struct {
	Label string // Tag 0
	Mode uint8 // Tag 1
	ModeTags []ModeTag // Tag 2
}

func (s *ModeOption) Encode() tlv.Struct {
	st := make(tlv.Struct)
	// Field: Label Tag: 0
    
        st[tlv.ContextTag(0)] = (s.Label)
    
	// Field: Mode Tag: 1
    
        st[tlv.ContextTag(1)] = uint64(s.Mode)
    
	// Field: ModeTags Tag: 2
    if len(s.ModeTags) > 0 {
        
        list := make(tlv.StructArray, 0, len(s.ModeTags))
        for _, v := range s.ModeTags {
            list = append(list, v.Encode())
        }
        st[tlv.ContextTag(2)] = list
        
    }
	return st
}

func (s *ModeOption) Decode(val any) error {
	st, ok := val.(tlv.Struct)
	if !ok {
		return fmt.Errorf("expected tlv.Struct, got %T", val)
	}
	if val, ok := st[tlv.ContextTag(0)]; ok {
        
        
            if v, ok := val.(string); ok {
s.Label = v
}
        
        
	}
	if val, ok := st[tlv.ContextTag(1)]; ok {
        
        
            if v, ok := val.(uint64); ok {
casted := uint8(v)
s.Mode = casted
}
        
        
	}
	if val, ok := st[tlv.ContextTag(2)]; ok {
        
            
            if list, ok := val.(tlv.StructArray); ok {
                 for _, item := range list {
                    var newItem ModeTag
                    if err := newItem.Decode(item); err != nil { return err }
                    s.ModeTags = append(s.ModeTags, newItem)
                 }
            }
            
        
	}

    return nil
}

type ModeTag struct {
	MfgCode *dm.VendorID // Tag 0
	Value dm.Enum16 // Tag 1
}

func (s *ModeTag) Encode() tlv.Struct {
	st := make(tlv.Struct)
	// Field: MfgCode Tag: 0
    if s.MfgCode != nil {
        st[tlv.ContextTag(0)] = uint64(*s.MfgCode)
    }
	// Field: Value Tag: 1
    
        st[tlv.ContextTag(1)] = uint64(s.Value)
    
	return st
}

func (s *ModeTag) Decode(val any) error {
	st, ok := val.(tlv.Struct)
	if !ok {
		return fmt.Errorf("expected tlv.Struct, got %T", val)
	}
	if val, ok := st[tlv.ContextTag(0)]; ok {
        
        
            if v, ok := val.(uint64); ok {
casted := dm.VendorID(v)
s.MfgCode = &casted
}
        
        
	}
	if val, ok := st[tlv.ContextTag(1)]; ok {
        
        
            if v, ok := val.(uint64); ok {
casted := dm.Enum16(v)
s.Value = casted
}
        
        
	}

    return nil
}

